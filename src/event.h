// event.h

#ifndef _EVENT_H_
#define	_EVENT_H_



class CInstanceManager;


#define MAXEVENT	100

// Evénements.

enum EventMsg
{
	EVENT_NULL				= 0,

	EVENT_QUIT				= 1,
	EVENT_FRAME				= 2,
	EVENT_LBUTTONDOWN		= 3,
	EVENT_RBUTTONDOWN		= 4,
	EVENT_LBUTTONUP			= 5,
	EVENT_RBUTTONUP			= 6,
	EVENT_MOUSEMOVE			= 7,
	EVENT_KEYDOWN			= 8,
	EVENT_KEYUP				= 9,
	EVENT_CHAR				= 10,
	EVENT_FOCUS				= 11,

	EVENT_UPDINTERFACE		= 20,
	EVENT_WIN				= 30,
	EVENT_LOST				= 31,

	EVENT_BUTTON_OK			= 40,
	EVENT_BUTTON_CANCEL		= 41,
	EVENT_BUTTON_NEXT		= 42,
	EVENT_BUTTON_PREV		= 43,
	EVENT_BUTTON_QUIT		= 44,
	EVENT_BUTTON_HELP		= 45,
	EVENT_BUTTON_BRAKE		= 46,
	EVENT_BUTTON_HORN		= 47,
	EVENT_BUTTON_CAMERA		= 48,

	EVENT_BUTTON0			= 50,
	EVENT_BUTTON1			= 51,
	EVENT_BUTTON2			= 52,
	EVENT_BUTTON3			= 53,
	EVENT_BUTTON4			= 54,
	EVENT_BUTTON5			= 55,
	EVENT_BUTTON6			= 56,
	EVENT_BUTTON7			= 57,
	EVENT_BUTTON8			= 58,
	EVENT_BUTTON9			= 59,
	EVENT_BUTTON10			= 60,
	EVENT_BUTTON11			= 61,
	EVENT_BUTTON12			= 62,
	EVENT_BUTTON13			= 63,
	EVENT_BUTTON14			= 64,
	EVENT_BUTTON15			= 65,
	EVENT_BUTTON16			= 66,
	EVENT_BUTTON17			= 67,
	EVENT_BUTTON18			= 68,
	EVENT_BUTTON19			= 69,

	EVENT_EDIT0				= 70,
	EVENT_EDIT1				= 71,
	EVENT_EDIT2				= 72,
	EVENT_EDIT3				= 73,
	EVENT_EDIT4				= 74,
	EVENT_EDIT5				= 75,
	EVENT_EDIT6				= 76,
	EVENT_EDIT7				= 77,
	EVENT_EDIT8				= 78,
	EVENT_EDIT9				= 79,

	EVENT_WINDOW0			= 80,	// tableau de bord en bas
	EVENT_WINDOW1			= 81,	// CDisplayText
	EVENT_WINDOW2			= 82,
	EVENT_WINDOW3			= 83,
	EVENT_WINDOW4			= 84,	// setup
	EVENT_WINDOW5			= 85,
	EVENT_WINDOW6			= 86,
	EVENT_WINDOW7			= 87,
	EVENT_WINDOW8			= 88,
	EVENT_WINDOW9			= 89,	// dialogue

	EVENT_LABEL0			= 90,
	EVENT_LABEL1			= 91,
	EVENT_LABEL2			= 92,
	EVENT_LABEL3			= 93,
	EVENT_LABEL4			= 94,
	EVENT_LABEL5			= 95,
	EVENT_LABEL6			= 96,
	EVENT_LABEL7			= 97,
	EVENT_LABEL8			= 98,
	EVENT_LABEL9			= 99,
	EVENT_LABEL10			= 100,
	EVENT_LABEL11			= 101,
	EVENT_LABEL12			= 102,
	EVENT_LABEL13			= 103,
	EVENT_LABEL14			= 104,
	EVENT_LABEL15			= 105,
	EVENT_LABEL16			= 106,
	EVENT_LABEL17			= 107,
	EVENT_LABEL18			= 108,
	EVENT_LABEL19			= 109,

	EVENT_LIST0				= 110,
	EVENT_LIST1				= 111,
	EVENT_LIST2				= 112,
	EVENT_LIST3				= 113,
	EVENT_LIST4				= 114,
	EVENT_LIST5				= 115,
	EVENT_LIST6				= 116,
	EVENT_LIST7				= 117,
	EVENT_LIST8				= 118,
	EVENT_LIST9				= 119,

	EVENT_INFO0				= 120,
	EVENT_INFO1				= 121,
	EVENT_INFO2				= 122,
	EVENT_INFO3				= 123,
	EVENT_INFO4				= 124,
	EVENT_INFO5				= 125,
	EVENT_INFO6				= 126,
	EVENT_INFO7				= 127,
	EVENT_INFO8				= 128,
	EVENT_INFO9				= 129,
	EVENT_INFO10			= 130,
	EVENT_INFO11			= 131,
	EVENT_INFO12			= 132,
	EVENT_INFO13			= 133,
	EVENT_INFO14			= 134,
	EVENT_INFO15			= 135,
	EVENT_INFO16			= 136,
	EVENT_INFO17			= 137,
	EVENT_INFO18			= 138,
	EVENT_INFO19			= 139,

	EVENT_ARRAY0			= 140,
	EVENT_ARRAY1			= 141,
	EVENT_ARRAY2			= 142,
	EVENT_ARRAY3			= 143,
	EVENT_ARRAY4			= 144,
	EVENT_ARRAY5			= 145,
	EVENT_ARRAY6			= 146,
	EVENT_ARRAY7			= 147,
	EVENT_ARRAY8			= 148,
	EVENT_ARRAY9			= 149,

	EVENT_TOOLTIP			= 200,

	EVENT_DIALOG_OK			= 300,
	EVENT_DIALOG_CANCEL		= 301,
	EVENT_DIALOG_LABEL		= 302,
	EVENT_DIALOG_LABEL1		= 303,
	EVENT_DIALOG_LABEL2		= 304,
	EVENT_DIALOG_LABEL3		= 305,
	EVENT_DIALOG_LIST		= 306,
	EVENT_DIALOG_EDIT		= 307,
	EVENT_DIALOG_CHECK1		= 308,
	EVENT_DIALOG_CHECK2		= 309,

	EVENT_INTERFACE_MISSION	= 400,
	EVENT_INTERFACE_FREE	= 401,
	EVENT_INTERFACE_USER	= 402,
	EVENT_INTERFACE_PROTO	= 403,
	EVENT_INTERFACE_DUEL	= 404,
	EVENT_INTERFACE_NAME	= 405,
	EVENT_INTERFACE_SETUP	= 406,
	EVENT_INTERFACE_QUIT	= 407,
	EVENT_INTERFACE_BACK	= 408,
	EVENT_INTERFACE_AGAIN	= 409,
	EVENT_INTERFACE_SAVE	= 410,
	EVENT_INTERFACE_ABORT	= 412,
	EVENT_INTERFACE_TERM	= 414,
	EVENT_INTERFACE_GHOSTm	= 415,
	EVENT_INTERFACE_GHOSTg	= 416,
	EVENT_INTERFACE_OK		= 417,
	EVENT_INTERFACE_PREV	= 418,
	EVENT_INTERFACE_NEXT	= 419,
	EVENT_INTERFACE_EXIT	= 420,

	EVENT_INTERFACE_LIST	= 422,
	EVENT_INTERFACE_PESETAS	= 423,
	EVENT_INTERFACE_IMAGE	= 424,
	EVENT_INTERFACE_RESUME	= 425,
	EVENT_INTERFACE_PLAY	= 426,

	EVENT_INTERFACE_SETUPd	= 430,
	EVENT_INTERFACE_SETUPg	= 431,
	EVENT_INTERFACE_SETUPp	= 432,
	EVENT_INTERFACE_SETUPc	= 433,
	EVENT_INTERFACE_SETUPs	= 434,

	EVENT_INTERFACE_RESOL	= 441,
	EVENT_INTERFACE_FULL	= 442,
	EVENT_INTERFACE_APPLY	= 443,

	EVENT_INTERFACE_TOTO	= 450,
	EVENT_INTERFACE_SHADOW	= 451,
	EVENT_INTERFACE_DIRTY	= 452,
	EVENT_INTERFACE_LENS	= 453,
	EVENT_INTERFACE_SKY		= 454,
	EVENT_INTERFACE_PLANET	= 456,
	EVENT_INTERFACE_LIGHT	= 457,
	EVENT_INTERFACE_PARTI	= 458,
	EVENT_INTERFACE_CLIP	= 459,
	EVENT_INTERFACE_DETAIL	= 460,
	EVENT_INTERFACE_TEXTURE	= 461,
	EVENT_INTERFACE_RAIN	= 462,
	EVENT_INTERFACE_GLINT	= 463,
	EVENT_INTERFACE_TOOLTIP	= 464,
	EVENT_INTERFACE_MOVIES	= 465,
	EVENT_INTERFACE_WHEEL	= 467,
	EVENT_INTERFACE_CBACK	= 468,
	EVENT_INTERFACE_CBOARD	= 469,
	EVENT_INTERFACE_EFFECT	= 470,
	EVENT_INTERFACE_FLASH	= 471,
	EVENT_INTERFACE_MOUSE	= 472,
	EVENT_INTERFACE_GADGET	= 474,
	EVENT_INTERFACE_FOG		= 475,
	EVENT_INTERFACE_SUPER	= 476,
	EVENT_INTERFACE_BLAST	= 477,

	EVENT_INTERFACE_WOK		= 480,
	EVENT_INTERFACE_WCANCEL	= 481,
	EVENT_INTERFACE_ROK		= 482,
	EVENT_INTERFACE_RCANCEL	= 483,
	EVENT_INTERFACE_IOLIST	= 484,
	EVENT_INTERFACE_IONAME	= 485,

	EVENT_INTERFACE_KINFO1	= 500,
	EVENT_INTERFACE_KINFO2	= 501,
	EVENT_INTERFACE_KGROUP	= 502,
	EVENT_INTERFACE_KSCROLL	= 503,
	EVENT_INTERFACE_KDEF	= 504,
	EVENT_INTERFACE_KLEFT	= 505,
	EVENT_INTERFACE_KRIGHT	= 506,
	EVENT_INTERFACE_KUP		= 507,
	EVENT_INTERFACE_KDOWN	= 508,
	EVENT_INTERFACE_KBRAKE	= 509,
	EVENT_INTERFACE_KHORN	= 510,
	EVENT_INTERFACE_KCAMERA	= 511,
	EVENT_INTERFACE_KQUIT	= 514,
	EVENT_INTERFACE_KHELP	= 515,

	EVENT_INTERFACE_VOLSOUND= 530,
	EVENT_INTERFACE_VOLMUSIC= 531,
	EVENT_INTERFACE_SOUND3D	= 532,
	EVENT_INTERFACE_COMMENTS= 533,

	EVENT_INTERFACE_MIN		= 540,
	EVENT_INTERFACE_NORM	= 541,
	EVENT_INTERFACE_MAX		= 542,

	EVENT_INTERFACE_SILENT	= 550,
	EVENT_INTERFACE_NOISY	= 551,

	EVENT_INTERFACE_STEERING= 560,
	EVENT_INTERFACE_JOYPAD	= 561,
	EVENT_INTERFACE_FFBc	= 562,
	EVENT_INTERFACE_FFBs	= 563,

	EVENT_INTERFACE_GLINTl	= 570,
	EVENT_INTERFACE_GLINTr	= 571,
	EVENT_INTERFACE_GLINTu	= 572,
	EVENT_INTERFACE_GLINTb	= 573,

	EVENT_INTERFACE_NEDIT	= 580,
	EVENT_INTERFACE_NLIST	= 581,
	EVENT_INTERFACE_NOK		= 582,
	EVENT_INTERFACE_NCREATE	= 583,
	EVENT_INTERFACE_NDELETE	= 584,
	EVENT_INTERFACE_LEVEL1	= 590,
	EVENT_INTERFACE_LEVEL2	= 591,
	EVENT_INTERFACE_LEVEL3	= 592,
	EVENT_INTERFACE_LEVEL4	= 593,

	EVENT_INTERFACE_POK		= 621,
	EVENT_INTERFACE_PNEXT	= 624,
	EVENT_INTERFACE_PPREV	= 625,
	EVENT_INTERFACE_PELEV	= 626,
	EVENT_INTERFACE_PSPECB	= 627,
	EVENT_INTERFACE_PSPECT	= 628,
	EVENT_INTERFACE_PCOLOR0	= 630,
	EVENT_INTERFACE_PCOLOR1	= 631,
	EVENT_INTERFACE_PCOLOR2	= 632,
	EVENT_INTERFACE_PCOLOR3	= 633,
	EVENT_INTERFACE_PCOLOR4	= 634,
	EVENT_INTERFACE_PCOLOR5	= 635,
	EVENT_INTERFACE_PCOLOR6	= 636,
	EVENT_INTERFACE_PCOLOR7	= 637,
	EVENT_INTERFACE_PCOLOR8	= 638,
	EVENT_INTERFACE_PCOLOR9	= 639,
	EVENT_INTERFACE_PCOLOR10= 640,
	EVENT_INTERFACE_PCOLOR11= 641,
	EVENT_INTERFACE_PCOLOR12= 642,
	EVENT_INTERFACE_PCOLOR13= 643,
	EVENT_INTERFACE_PCOLOR14= 644,
	EVENT_INTERFACE_PCOLOR15= 645,
	EVENT_INTERFACE_PCOLOR16= 646,
	EVENT_INTERFACE_PCOLOR17= 647,
	EVENT_INTERFACE_PCOLOR18= 648,
	EVENT_INTERFACE_PCOLOR19= 649,
	EVENT_INTERFACE_PGSPEED	= 650,
	EVENT_INTERFACE_PLSPEED	= 651,
	EVENT_INTERFACE_PGACCEL	= 652,
	EVENT_INTERFACE_PLACCEL	= 653,
	EVENT_INTERFACE_PGGRIP	= 654,
	EVENT_INTERFACE_PLGRIP	= 655,
	EVENT_INTERFACE_PGSOLID	= 656,
	EVENT_INTERFACE_PLSOLID	= 657,
	EVENT_INTERFACE_PPRICE	= 658,
	EVENT_INTERFACE_PPESETAS= 659,
	EVENT_INTERFACE_PSUBMOD0= 660,
	EVENT_INTERFACE_PSUBMOD1= 661,
	EVENT_INTERFACE_PSUBMOD2= 662,
	EVENT_INTERFACE_PSUBMOD3= 663,

	EVENT_DT_GROUP0			= 700,
	EVENT_DT_GROUP1			= 701,
	EVENT_DT_GROUP2			= 702,
	EVENT_DT_GROUP3			= 703,
	EVENT_DT_GROUP4			= 704,
	EVENT_DT_LABEL0			= 710,
	EVENT_DT_LABEL1			= 711,
	EVENT_DT_LABEL2			= 712,
	EVENT_DT_LABEL3			= 713,
	EVENT_DT_LABEL4			= 714,

	EVENT_CMD				= 800,
	EVENT_SPEED				= 801,
	EVENT_TIME				= 802,
	EVENT_PROGRESS			= 803,
	EVENT_BONUS				= 804,

	EVENT_OBJECT_GLEVEL1	= 1360,
	EVENT_OBJECT_GLEVEL2	= 1361,
	EVENT_OBJECT_GSPEED		= 1362,
	EVENT_OBJECT_GRPM		= 1363,
	EVENT_OBJECT_GMOTOR		= 1364,
	EVENT_OBJECT_GCOMPASS	= 1365,
	EVENT_OBJECT_GPROGRESS	= 1366,
	EVENT_OBJECT_GGEIGER	= 1367,
	EVENT_OBJECT_MAP		= 1370,
	EVENT_OBJECT_MAPZOOM	= 1371,
	EVENT_OBJECT_EDITLOCK	= 1372,

	EVENT_USER				= 10000,
	EVENT_FORCE_DWORD		= 0x7fffffff
};

typedef struct
{
	EventMsg	event;		// événement (EVENT_*)
	long		param;		// paramètre
	FPOINT		pos;		// position de la souris (0..1)
	float		axeX;		// commande de l'axe X (-1..1) avancer/reculer
	float		axeY;		// commande de l'axe Y (-1..1) tourner
	float		axeZ;		// commande de l'axe Z (-1..1) monter/descendre
	float		axeW;		// commande de l'axe W (-1..1) frain à main
	short		keyState;	// état du clavier (KS_*)
	float		rTime;		// temps relatif
}
Event;


#define VK_BUTTON1		(0x100+1)	// joystick button 1
#define VK_BUTTON2		(0x100+2)	// joystick button 2
#define VK_BUTTON3		(0x100+3)	// joystick button 3
#define VK_BUTTON4		(0x100+4)	// joystick button 4
#define VK_BUTTON5		(0x100+5)	// joystick button 5
#define VK_BUTTON6		(0x100+6)	// joystick button 6
#define VK_BUTTON7		(0x100+7)	// joystick button 7
#define VK_BUTTON8		(0x100+8)	// joystick button 8
#define VK_BUTTON9		(0x100+9)	// joystick button 9
#define VK_BUTTON10		(0x100+10)	// joystick button 10
#define VK_BUTTON11		(0x100+11)	// joystick button 11
#define VK_BUTTON12		(0x100+12)	// joystick button 12
#define VK_BUTTON13		(0x100+13)	// joystick button 13
#define VK_BUTTON14		(0x100+14)	// joystick button 14
#define VK_BUTTON15		(0x100+15)	// joystick button 15
#define VK_BUTTON16		(0x100+16)	// joystick button 16
#define VK_BUTTON17		(0x100+17)	// joystick button 17
#define VK_BUTTON18		(0x100+18)	// joystick button 18
#define VK_BUTTON19		(0x100+19)	// joystick button 19
#define VK_BUTTON20		(0x100+20)	// joystick button 20
#define VK_BUTTON21		(0x100+21)	// joystick button 21
#define VK_BUTTON22		(0x100+22)	// joystick button 22
#define VK_BUTTON23		(0x100+23)	// joystick button 23
#define VK_BUTTON24		(0x100+24)	// joystick button 24
#define VK_BUTTON25		(0x100+25)	// joystick button 25
#define VK_BUTTON26		(0x100+26)	// joystick button 26
#define VK_BUTTON27		(0x100+27)	// joystick button 27
#define VK_BUTTON28		(0x100+28)	// joystick button 28
#define VK_BUTTON29		(0x100+29)	// joystick button 29
#define VK_BUTTON30		(0x100+30)	// joystick button 30
#define VK_BUTTON31		(0x100+31)	// joystick button 31
#define VK_BUTTON32		(0x100+32)	// joystick button 32

#define VK_JLEFT		(0x200+1)	// joystick gauche
#define VK_JRIGHT		(0x200+2)	// joystick droite
#define VK_JUP			(0x200+3)	// joystick haut
#define VK_JDOWN		(0x200+4)	// joystick bas

#define VK_WHEELUP		(0x200+10)	// molette souris up
#define VK_WHEELDOWN	(0x200+11)	// molette souris down

#define VK_DEFAULT		(0x200+12)	// action par défaut


enum KeyRank
{
	KEYRANK_LEFT	= 0,
	KEYRANK_RIGHT	= 1,
	KEYRANK_UP		= 2,
	KEYRANK_DOWN	= 3,
	KEYRANK_BRAKE	= 4,
	KEYRANK_HORN	= 5,
	KEYRANK_CAMERA	= 6,
	KEYRANK_NEAR	= 9,
	KEYRANK_AWAY	= 10,
	KEYRANK_QUIT	= 13,
	KEYRANK_HELP	= 14,
	KEYRANK_SPEED10	= 17,
	KEYRANK_SPEED15	= 18,
	KEYRANK_SPEED20	= 19,
	KEYRANK_SPEED30	= 20,
	KEYRANK_AIMUP	= 21,
	KEYRANK_AIMDOWN	= 22,
	KEYRANK_CBOT	= 23,
};



class CEvent
{
public:
	CEvent(CInstanceManager* iMan);
	~CEvent();

	void	Flush();
	void	MakeEvent(Event &event, EventMsg msg);
	BOOL	AddEvent(const Event &event);
	BOOL	GetEvent(Event &event);

protected:

protected:
	CInstanceManager* m_iMan;

	Event	m_fifo[MAXEVENT];
	int		m_head;
	int		m_tail;
	int		m_total;
};


#endif //_EVENT_H_
